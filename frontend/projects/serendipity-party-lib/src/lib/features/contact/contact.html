<command-bar>

  @if (isHandsetPortrait()) {

    <ng-container>

      <button matIconButton
              aria-label="Save Contact button"
              class="md-command-bar-button"
              (click)="onSave()"
              [disabled]="!isDirty() || !isValid()">
        <mat-icon class="material-icons"> save </mat-icon>
      </button>

      <button matIconButton
              aria-label="Save and Close Contact button"
              class="md-command-bar-button"
              (click)="onSaveAndClose()"
              [disabled]="!isDirty() || !isValid()">
        <mat-icon class="material-icons"> arrow_back </mat-icon>
      </button>

      <button matIconButton
              aria-label="New Contact button"
              class="md-command-bar-button"
              (click)="onNew()">
        <mat-icon class="material-icons"> add </mat-icon>
      </button>

      <button matIconButton
              aria-label="Deactivate Contact button"
              class="md-command-bar-button"
              (click)="onDeactivate()"
              [disabled]="true">
        <mat-icon class="material-icons"> visibility-off </mat-icon>
      </button>

      <button matIconButton
              aria-label="Email a Link button"
              class="md-command-bar-button"
              [disabled]="true">
        <mat-icon class="material-icons"> link </mat-icon>
      </button>

    </ng-container>

  } @else {

    <ng-container>

      <button matButton="filled"
              aria-label="Save Contact button"
              class="md-command-bar-button"
              (click)="onSave()"
              [disabled]="!isDirty() || !isValid()">
        <mat-icon class="material-icons"> save </mat-icon>
        SAVE
      </button>

      <button matButton="filled"
              aria-label="Save and Close Contact button"
              class="md-command-bar-button"
              (click)="onSaveAndClose()"
              [disabled]="!isDirty() || !isValid()">
        <mat-icon class="material-icons"> arrow_back </mat-icon>
        SAVE & CLOSE
      </button>

      <button matButton="filled"
              aria-label="New Contact button"
              class="md-command-bar-button"
              (click)="onNew()">
        <mat-icon class="material-icons"> add </mat-icon>
        NEW
      </button>

      <button matButton="filled"
              aria-label="Deactivate Contact button"
              class="md-command-bar-button"
              (click)="onDeactivate()"
              [disabled]="true">
        <mat-icon class="material-icons"> visibility-off </mat-icon>
        DEACTIVATE
      </button>

      <button matButton="filled"
              aria-label="Email a Link button"
              class="md-command-bar-button"
              [disabled]="true">
        <mat-icon class="material-icons"> link </mat-icon>
        EMAIL A LINK
      </button>

    </ng-container>

  }

  <span class="md-command-bar-spacer"></span>

  <button matIconButton
          aria-label="Close button"
          (click)="onClose()">
    <mat-icon class="material-icons"> clear </mat-icon>
  </button>

</command-bar>

<activity-bar>

  @if (item) {

    <span class="md-font-headline-lg" aria-label="Activity Bar Title">
      Contact: {{ item.party.displayName }}
    </span>

  }

</activity-bar>

<div class="md-content-container">

  @if (item) {

    <div class="md-tab-group-container">

      <mat-tab-group (selectedTabChange)="onTabChanged($event)">

        <mat-tab label="Summary">

          <div class="md-grid-2-column-layout-container">

            <mat-card>

              <!-- General Information -->

              <mat-card-content class="md-card-content">

                <!-- Chrome ignores autocomplete="off" so go to chrome://settings/autofill and turn 'Auto-fill forms' off -->

                <dynamic-form autocomplete="off"
                              className="md-grid-3-column-layout-container"
                              [formGroup]="generalInformationGroup"
                              [model]="generalInformationModel"
                              (customEvent)="onCustomEvent($event)">
                </dynamic-form>

                <!--
                <p>
                  Form Value: {{ generalInformationGroup.value | json }}
                </p>
                -->

              </mat-card-content>

            </mat-card>

            <mat-card>

              <!-- Address Information -->

              <mat-card-content class="md-card-content">

                <dynamic-form autocomplete="off"
                              className="md-grid-3-column-layout-container"
                              [formGroup]="addressInformationGroup"
                              [model]="addressInformationModel">
                </dynamic-form>

                <!--
                <p>
                  Form Value: {{ addressInformationGroup.value | json }}
                </p>
                -->

              </mat-card-content>

            </mat-card>

          </div>

        </mat-tab>

        <mat-tab label="Details">

          <ng-template matTabContent>

            <div class="md-tab-component-container">

              <!-- See: https://material.angular.io/components/tabs/overview#lazy-loading -->
              Details tab: I was lazy loaded...

            </div>

          </ng-template>

        </mat-tab>

        <mat-tab label="Related">

          <ng-template matTabContent>

            <div class="md-tab-component-container">

              <contact-related-tab [item]="item">
              </contact-related-tab>

            </div>

          </ng-template>

        </mat-tab>

        @if (item.electorate) {

          <mat-tab label="Electoral Division">

            <ng-template matTabContent>

              <div class="md-tab-component-container"
                   leaflet
                   [leafletOptions]="mapOptions"
                   (leafletMapReady)="onMapReady($event)">
              </div>

            </ng-template>

          </mat-tab>


        }

      </mat-tab-group>

    </div>

  }

</div>
